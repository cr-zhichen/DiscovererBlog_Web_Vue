import{ag as y,ak as V,A as p,q as x,o as E,e as h,Y as o,w as a,z as I,ai as k,al as S,am as B,x as F}from"./index-14908bbc.js";import{v as L}from"./el-loading-e8352f98.js";import{E as N,a as P}from"./el-form-item-ffb67b6a.js";import{E as T}from"./el-button-7150be02.js";import{l as q,b as M,d}from"./PostAPI-f3cbca8f.js";import"./index-f4253236.js";const C=s=>(S("data-v-e4e7ec76"),s=s(),B(),s),R={class:"login-div"},U=C(()=>F("h1",{class:"login-form-loginText"},"登录",-1)),z={__name:"LoginPage",emits:["response"],setup(s,{emit:c}){const _=V();c("response","登录");const e=p({email:"",password:""}),t=p(!1),g=[{required:!0,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],f=[{required:!0,message:"密码不能为空",trigger:"blur"}],m=async()=>{t.value=!0,q(e.value.email,e.value.password,l=>{t.value=!1,localStorage.setItem("token",l.data.token),d({title:"登录成功",type:"success",message:"欢迎回来"}),_()},l=>{t.value=!1,d({title:"登录失败",type:"error",message:l})})};return(l,r)=>{const u=M,n=P,v=T,w=N,b=L;return x((E(),h("div",R,[U,o(w,{model:e.value,onSubmit:I(m,["prevent"]),class:"login-form"},{default:a(()=>[o(n,{label:"邮箱",prop:"email",rules:g},{default:a(()=>[o(u,{modelValue:e.value.email,"onUpdate:modelValue":r[0]||(r[0]=i=>e.value.email=i),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),o(n,{label:"密码",prop:"password",rules:f},{default:a(()=>[o(u,{modelValue:e.value.password,"onUpdate:modelValue":r[1]||(r[1]=i=>e.value.password=i),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),o(n,null,{default:a(()=>[o(v,{type:"primary",onClick:m,class:"login-button"},{default:a(()=>[k("登录 ")]),_:1})]),_:1})]),_:1},8,["model","onSubmit"])])),[[b,t.value]])}}},J=y(z,[["__scopeId","data-v-e4e7ec76"]]);export{J as default};
