import{L as j,b as K,_ as U,d as x,i as te,k as Z,ar as le,A as v,a as g,n as se,aU as A,b0 as X,o as T,f as $,w as J,q as oe,x as D,y as k,u as d,D as Y,v as ae,Z as re,e as Q,Y as V,$ as ne,a7 as ie,M as E,aw as I,h as q,C as ce,p as G,T as ue,l as fe,B as ve,as as me,s as de,r as pe,a1 as he,O as be,a5 as ye}from"./index-caa57ff3.js";import{B as we,r as ge,G as w}from"./el-popper-3dcabdd8.js";let R;const Me=c=>{var i;if(!j)return 0;if(R!==void 0)return R;const l=document.createElement("div");l.className=`${c}-scrollbar__wrap`,l.style.visibility="hidden",l.style.width="100px",l.style.position="absolute",l.style.top="-9999px",document.body.appendChild(l);const t=l.offsetWidth;l.style.overflow="scroll";const a=document.createElement("div");a.style.width="100%",l.appendChild(a);const u=a.offsetWidth;return(i=l.parentNode)==null||i.removeChild(l),R=t-u,R};function Oe(c,i){if(!j)return;if(!i){c.scrollTop=0;return}const l=[];let t=i.offsetParent;for(;t!==null&&c!==t&&c.contains(t);)l.push(t),t=t.offsetParent;const a=i.offsetTop+l.reduce((s,p)=>s+p.offsetTop,0),u=a+i.offsetHeight,r=c.scrollTop,m=r+c.clientHeight;a<r?c.scrollTop=a:u>m&&(c.scrollTop=u-c.clientHeight)}const ee=Symbol("scrollbarContextKey"),Se=K({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),_e="Thumb",ze=x({__name:"thumb",props:Se,setup(c){const i=c,l=te(ee),t=Z("scrollbar");l||le(_e,"can not inject scrollbar context");const a=v(),u=v(),r=v({}),m=v(!1);let s=!1,p=!1,b=j?document.onselectstart:null;const o=g(()=>we[i.vertical?"vertical":"horizontal"]),S=g(()=>ge({size:i.size,move:i.move,bar:o.value})),_=g(()=>a.value[o.value.offset]**2/l.wrapElement[o.value.scrollSize]/i.ratio/u.value[o.value.offset]),C=n=>{var e;if(n.stopPropagation(),n.ctrlKey||[1,2].includes(n.button))return;(e=window.getSelection())==null||e.removeAllRanges(),M(n);const f=n.currentTarget;f&&(r.value[o.value.axis]=f[o.value.offset]-(n[o.value.client]-f.getBoundingClientRect()[o.value.direction]))},L=n=>{if(!u.value||!a.value||!l.wrapElement)return;const e=Math.abs(n.target.getBoundingClientRect()[o.value.direction]-n[o.value.client]),f=u.value[o.value.offset]/2,h=(e-f)*100*_.value/a.value[o.value.offset];l.wrapElement[o.value.scroll]=h*l.wrapElement[o.value.scrollSize]/100},M=n=>{n.stopImmediatePropagation(),s=!0,document.addEventListener("mousemove",H),document.addEventListener("mouseup",y),b=document.onselectstart,document.onselectstart=()=>!1},H=n=>{if(!a.value||!u.value||s===!1)return;const e=r.value[o.value.axis];if(!e)return;const f=(a.value.getBoundingClientRect()[o.value.direction]-n[o.value.client])*-1,h=u.value[o.value.offset]-e,z=(f-h)*100*_.value/a.value[o.value.offset];l.wrapElement[o.value.scroll]=z*l.wrapElement[o.value.scrollSize]/100},y=()=>{s=!1,r.value[o.value.axis]=0,document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",y),B(),p&&(m.value=!1)},O=()=>{p=!1,m.value=!!i.size},W=()=>{p=!0,m.value=s};se(()=>{B(),document.removeEventListener("mouseup",y)});const B=()=>{document.onselectstart!==b&&(document.onselectstart=b)};return A(X(l,"scrollbarElement"),"mousemove",O),A(X(l,"scrollbarElement"),"mouseleave",W),(n,e)=>(T(),$(re,{name:d(t).b("fade"),persisted:""},{default:J(()=>[oe(D("div",{ref_key:"instance",ref:a,class:k([d(t).e("bar"),d(t).is(d(o).key)]),onMousedown:L},[D("div",{ref_key:"thumb",ref:u,class:k(d(t).e("thumb")),style:Y(d(S)),onMousedown:C},null,38)],34),[[ae,n.always||m.value]])]),_:1},8,["name"]))}});var F=U(ze,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Ee=K({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Te=x({__name:"bar",props:Ee,setup(c,{expose:i}){const l=c,t=v(0),a=v(0);return i({handleScroll:r=>{if(r){const m=r.offsetHeight-w,s=r.offsetWidth-w;a.value=r.scrollTop*100/m*l.ratioY,t.value=r.scrollLeft*100/s*l.ratioX}}}),(r,m)=>(T(),Q(ne,null,[V(F,{move:t.value,ratio:r.ratioX,size:r.width,always:r.always},null,8,["move","ratio","size","always"]),V(F,{move:a.value,ratio:r.ratioY,size:r.height,vertical:"",always:r.always},null,8,["move","ratio","size","always"])],64))}});var ke=U(Te,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Ce=K({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ie([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),He={scroll:({scrollTop:c,scrollLeft:i})=>[c,i].every(E)},Be="ElScrollbar",Ne=x({name:Be}),Pe=x({...Ne,props:Ce,emits:He,setup(c,{expose:i,emit:l}){const t=c,a=Z("scrollbar");let u,r;const m=v(),s=v(),p=v(),b=v("0"),o=v("0"),S=v(),_=v(1),C=v(1),L=g(()=>{const e={};return t.height&&(e.height=I(t.height)),t.maxHeight&&(e.maxHeight=I(t.maxHeight)),[t.wrapStyle,e]}),M=g(()=>[t.wrapClass,a.e("wrap"),{[a.em("wrap","hidden-default")]:!t.native}]),H=g(()=>[a.e("view"),t.viewClass]),y=()=>{var e;s.value&&((e=S.value)==null||e.handleScroll(s.value),l("scroll",{scrollTop:s.value.scrollTop,scrollLeft:s.value.scrollLeft}))};function O(e,f){be(e)?s.value.scrollTo(e):E(e)&&E(f)&&s.value.scrollTo(e,f)}const W=e=>{E(e)&&(s.value.scrollTop=e)},B=e=>{E(e)&&(s.value.scrollLeft=e)},n=()=>{if(!s.value)return;const e=s.value.offsetHeight-w,f=s.value.offsetWidth-w,h=e**2/s.value.scrollHeight,z=f**2/s.value.scrollWidth,N=Math.max(h,t.minSize),P=Math.max(z,t.minSize);_.value=h/(e-h)/(N/(e-N)),C.value=z/(f-z)/(P/(f-P)),o.value=N+w<e?`${N}px`:"",b.value=P+w<f?`${P}px`:""};return q(()=>t.noresize,e=>{e?(u==null||u(),r==null||r()):({stop:u}=ce(p,n),r=A("resize",n))},{immediate:!0}),q(()=>[t.maxHeight,t.height],()=>{t.native||G(()=>{var e;n(),s.value&&((e=S.value)==null||e.handleScroll(s.value))})}),ue(ee,fe({scrollbarElement:m,wrapElement:s})),ve(()=>{t.native||G(()=>{n()})}),me(()=>n()),i({wrapRef:s,update:n,scrollTo:O,setScrollTop:W,setScrollLeft:B,handleScroll:y}),(e,f)=>(T(),Q("div",{ref_key:"scrollbarRef",ref:m,class:k(d(a).b())},[D("div",{ref_key:"wrapRef",ref:s,class:k(d(M)),style:Y(d(L)),onScroll:y},[(T(),$(pe(e.tag),{ref_key:"resizeRef",ref:p,class:k(d(H)),style:Y(e.viewStyle)},{default:J(()=>[de(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?he("v-if",!0):(T(),$(ke,{key:0,ref_key:"barRef",ref:S,height:o.value,width:b.value,always:e.always,"ratio-x":C.value,"ratio-y":_.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Re=U(Pe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const We=ye(Re);export{We as E,Me as g,Oe as s};
