import{a7 as b,G as p,E as h,o as y,g as E,k as o,w as a,l as V,a8 as x,aa as I,ab as k,h as S}from"./index-c8d18b96.js";import{v as B}from"./el-loading-f7243a5a.js";import{E as F,a as L}from"./el-form-item-394610b0.js";import{E as N}from"./el-button-39e6ded3.js";import{s as P,e as q,r as d}from"./PostAPI-73883a84.js";import"./index-abd78358.js";const C=s=>(I("data-v-0191f804"),s=s(),k(),s),R={class:"login-div"},T=C(()=>S("h1",{class:"login-form-loginText"},"登录",-1)),U={__name:"LoginPage",emits:["response"],setup(s,{emit:c}){c("response","登录");const e=p({email:"",password:""}),t=p(!1),_=[{required:!0,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],g=[{required:!0,message:"密码不能为空",trigger:"blur"}],m=async()=>{t.value=!0,P(e.value.email,e.value.password,l=>{t.value=!1,localStorage.setItem("token",l.data.token),d({title:"登录成功",type:"success",message:"欢迎回来"}),window.location.href="/manage"},l=>{t.value=!1,d({title:"登录失败",type:"error",message:l})})};return(l,r)=>{const u=q,n=L,f=N,v=F,w=B;return h((y(),E("div",R,[T,o(v,{model:e.value,onSubmit:V(m,["prevent"]),class:"login-form"},{default:a(()=>[o(n,{label:"邮箱",prop:"email",rules:_},{default:a(()=>[o(u,{modelValue:e.value.email,"onUpdate:modelValue":r[0]||(r[0]=i=>e.value.email=i),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),o(n,{label:"密码",prop:"password",rules:g},{default:a(()=>[o(u,{modelValue:e.value.password,"onUpdate:modelValue":r[1]||(r[1]=i=>e.value.password=i),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),o(n,null,{default:a(()=>[o(f,{type:"primary",onClick:m,class:"login-button"},{default:a(()=>[x("登录 ")]),_:1})]),_:1})]),_:1},8,["model","onSubmit"])])),[[w,t.value]])}}},H=b(U,[["__scopeId","data-v-0191f804"]]);export{H as default};
